<div class="container">
  <div class="d-flex justify-content-center mt-5">
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">

    <div class="card" style="width: 1000px">
      <div class="card-body">
        <div class="row">
          <div class="col-6">
            <label for="">Invoice Number</label>
            <input type="text" value="" class="form-control" formControlName="inovoiceNumber"  />

            <!-- {{ incoive.?errors | json}} -->



            <div
            *ngIf="invoiceNumber?.errors! && invoiceNumber?.touched
            && invoiceNumber?.dirty">

              <div *ngIf="invoiceNumber?.errors!['required']">
                  the Invoice is required
              </div>
              <div *ngIf="invoiceNumber!errors">
                <div *ngIf="invoiceNumber?.errors!['productExits']">
                  is already in database
              </div>
            </div>


          </div>



            {{invoiceNumber?.errors | json}}
            <label for="">Date</label>

            <!-- <mat-form-field  appearance="fill">
              <mat-label>Choose a date</mat-label>
              <input class="form-control" matInput [matDatepicker]="picker">
              <mat-hint>MM/DD/YYYY</mat-hint>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field> -->


                <input type="text"
                       placeholder="Choose Date"
                       class="form-control"
                       bsDatepicker>





          </div>
          <div class="col-6">
            <br />
            <select class="form-select" aria-label="Default select example">
              <option selected>choose customer</option>
              <option   *ngFor="let item of customers;" [value]="item.Id">{{item!.Name}}</option>
            </select>

            <br />

            <select class="form-select" aria-label="Default select example">


              <option>Chosee Employe</option>
                <option   *ngFor="let item of employees;" [value]="item.Id">{{item!.Name}}</option>
            </select>
          </div>
        </div>
      </div>


        <div class="d-flex justify-content-between m-3">
          <label  class="align-middle m-0   p-3" style="background-color: rgb(250, 240, 228) ; width: 350px;">Add Multiple Products</label>
          <button class="btn btn-primary   " (click)="addProduct()">Add Product</button>
        </div>
        <table class="  ms-5 " formArrayName="products">

          <tr *ngFor="let product of products().controls; let i = index"



          [formGroupName]="i">
            <td>

          <select  (change)="onPriceChange($event,price)"   class="form-select" aria-label="Default select example"  formControlName="ProductName" >
            <option selected>choose Product</option>

            <option   *ngFor="let item of productList;" [value]="item.Id">{{item!.Name}}</option>

          </select>
            </td>
            <td>

              <input #price type="text" placeholder="Price"

              formControlName="price"   class="form-control"

              />


            </td>

            <td>

              <input type="text"  placeholder="Quantity" formControlName="quantity" class="form-control" />
            </td>

            <td>

              <input type="text" placeholder="Total" formControlName="total" class="form-control" />
            </td>
            <td>
              <label for="">   </label>
              <button (click)="removeProduct(i)" class="btn btn-danger   ">
                Remove
              </button>
            </td>
          </tr>
        </table>
        <div class="d-flex flex-row-reverse mt-5">
          <button type="submit" class="btn btn-success btn-lg m-3" [disabled]="!productForm.valid">Save</button>
        </div>





    </div>
  </form>

  </div>
  {{this.productForm.value | json}}
</div>



